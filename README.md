# Nested Sets for jOOQ

Implementation of the [nested set model](https://en.wikipedia.org/wiki/Nested_set_model) for storing tree structures in
databases using jOOQ.

With this library the nested set model can easily be applied to record classes generated by jOOQ.

**Limitations**: Currently this library can only handle one tree per database table.

## Installation

Simply add the following dependecy to your project:

    <groupId>io.github.wernz0r</groupId>
    <artifactId>nested-sets-for-jooq</artifactId>
    <version>1.0.0</version>

## Usage

Implement the `NestedSetNode<P, T>` interface, where `P` is a generated jOOQ POJO and `T` is the data type of the
primary key. See [CategoryNode.java](src/test/java/io/github/wernz0r/nestedsets4jooq/model/CategoryNode.java) for an
example.

Now you can simply extend the `AbstractNestedSetDao<R, N, P, T>` class to create a DAO which provides essential nested
set operations. `R` is a jOOQ record class, `N` your implementation of `NestedSetNode`, `P`
is a jOOQ POJO and `T` is the data type of the primary key.
See [CategoryNestedSetDao.java](src/test/java/io/github/wernz0r/nestedsets4jooq/dao/CategoryNestedSetDao.java) for an
example.

### Examples

The `AbstractNestedSetDao` class provides multiple functions for handling nested sets. Extend this class and implement
the methods `getLeftField()` (which defines the column for storing the left value of the nested set),
`getRightField()` (which defines the column for storing the right value of the nested set) and `getLevelField()`
(which stores the depth of a node inside a tree).

Creating the root: `dao.insertAsRoot(node);`

Insert a child to a node as last child: `dao.insertAsLastChild(parentNode, childNode);`

Insert a child to a node as first child: `dao.insertAsFirstChild(parentNode, childNode);`

Retrieve all children of a node: `dao.getChildren(node);`

Retrieve all ancestors of a node: `dao.getAncestors(node);`

More examples can be found in
[AbstractNestedSetTest.java](src/test/java/io/github/wernz0r/nestedsets4jooq/dao/AbstractNestedSetTest.java)